/* Energjo-Hub static HTML + CSS (no JS) */
:root {
  --bg: #f8fafc; /* slate-50 */
  --text: #0f172a; /* slate-900 */
  --muted: #475569; /* slate-600 */
  --border: #e2e8f0; /* slate-200 */
  --chip-bg: #f1f5f9; /* slate-100 */
  --chip-text: #334155; /* slate-700 */
  --primary: #0f172a; /* slate-900 */
  --primary-contrast: #ffffff;
  --ring: #ef4444; /* red-500 */
  --accent: #dc2626; /* red-600 */
}

* { box-sizing: border-box; }
html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
body {
  margin: 0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: var(--bg);
}

.container { max-width: 72rem; margin: 0 auto; padding: 0 1rem; }

/* Loading Screen */
#loading-screen { position: fixed; inset: 0; z-index: 9999; background-color: #fff; display: flex; align-items: center; justify-content: center; 
  /* 背景のフェードアウト：ロゴが消えた後に開始 (delay 1.5s) */
  transition: opacity 2.5s ease 1.2s, visibility 2.5s ease 1.2s; 
}
#loading-screen.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

.loading-logo { width: min(240px, 60vw); height: auto; animation: logoAppear 0.8s ease-out; 
  /* ロゴのフェードアウト：クラス付与と同時に開始 */
  transition: opacity 1.0s ease, transform 1.0s ease; 
}
#loading-screen.hidden .loading-logo { opacity: 0; transform: scale(1.05); }

@keyframes logoAppear { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

/* Header */
.header { background: rgba(255,255,255,.75); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); border-bottom: 1px solid var(--border); box-shadow: 0 4px 16px rgba(0,0,0,.04); }
.header-inner { display: flex; align-items: center; justify-content: space-between; padding: 0.75rem 1rem; }
.brand { font-weight: 600; letter-spacing: -0.01em; color: var(--text); text-decoration: none; position: relative; display: flex; align-items: center; gap: 0.75rem; }
.logo-img { height: 32px; width: auto; object-fit: contain; }
.brand::after { content:""; position:absolute; left:0; bottom:-2px; height:2px; width:100%; background: linear-gradient(90deg, var(--accent), transparent); opacity:.3; }
.nav a { color: var(--muted); text-decoration: none; font-size: 0.875rem; }
.nav a:hover { color: var(--text); }

/* Hero */
.hero { padding: 2rem 1rem 1rem; }
.hero h1 { margin: 0; font-size: clamp(1.5rem, 1.2rem + 1vw, 2rem); font-weight: 600; }
.hero h1::after { content: ""; display: block; width: 56px; height: 3px; margin-top: 8px; background: linear-gradient(90deg, var(--accent), transparent); border-radius: 999px; }
.hero p { margin: 0.5rem 0 0; color: var(--muted); }

/* Controls */
.controls { padding: 1rem; display: flex; flex-direction: column; gap: 1rem; }
.controls-top { display: flex; gap: 0.75rem; flex-wrap: wrap; }
.search-wrap { flex: 1; min-width: 200px; }
.sort-select { border: 1px solid var(--border); border-radius: 0.75rem; padding: 0.625rem 2rem 0.625rem 1rem; font-size: 1rem; background-color: #fff; cursor: pointer; color: var(--text); }
.sort-select:focus { outline: none; border-color: var(--ring); }
/* @media (min-width: 640px) { .controls { grid-template-columns: 1fr auto; align-items: center; } } */
.search-input { width: 100%; border: 1px solid var(--border); border-radius: 0.75rem; padding: 0.625rem 0.75rem; font-size: 1rem; }
.search-input:focus { outline: none; border-color: var(--ring); box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring) 25%, transparent); }
.tag-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.tag { font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 999px; background: var(--chip-bg); color: var(--chip-text); border: 1px solid var(--border); cursor: pointer; }
.tag:hover { background: #fee2e2; border-color: #fecaca; color: #b91c1c; }
.tag.selected { background: #dc2626; color: white; border-color: #dc2626; }

/* Selected tags row */
.selected-tags { padding: 0 1rem; margin: -0.5rem auto 0.5rem; color: var(--muted); font-size: 0.75rem; display:flex; flex-wrap: wrap; gap: .5rem; align-items:center; }
.selected-tags .label { color: var(--muted); }
.selected-tags .chip { font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 999px; background: var(--chip-bg); color: var(--chip-text); border: 1px solid var(--border); cursor: pointer; }
.selected-tags .chip:hover { background: #fee2e2; border-color: #fecaca; color: #b91c1c; }
.tag-clear { font-size: 0.75rem; margin-left: auto; background: transparent; border: none; color: var(--muted); cursor: pointer; text-decoration: underline; padding: 0.25rem 0.5rem; }
.tag-clear:hover { color: var(--accent); }

/* Grid */
.grid { padding: 0 1rem 1rem; display: grid; grid-template-columns: 1fr; gap: 1rem; }
@media (min-width: 640px) { .grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 1024px) { .grid { grid-template-columns: repeat(3, 1fr); } }

/* Card */
.card { display: flex; flex-direction: column; height: 100%; background: #fff; color: inherit; text-decoration: none; border: 1px solid var(--border); border-radius: 1rem; padding: 1.25rem; box-shadow: 0 1px 2px rgba(0,0,0,0.04); transition: transform 120ms ease, box-shadow 120ms ease; }
.card:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.12); border-color: color-mix(in srgb, var(--accent) 40%, var(--border)); }
.card:focus-visible { outline: 2px solid var(--ring); outline-offset: 2px; }
.card-badge-row { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
.badge { display: inline-flex; align-items: center; gap: 0.375rem; font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 999px; background: var(--chip-bg); color: var(--chip-text); border: 1px solid var(--border); }
.badge svg { width: 14px; height: 14px; }
.updated { margin-left: auto; font-size: 0.6875rem; color: #64748b; }
.card h3 { margin: 0; font-weight: 600; font-size: 1rem; }
.card .headline { margin: 0.25rem 0 0; color: #334155; }
.card .desc { margin: 0.5rem 0 0; color: var(--muted); }

/* 3行でトリム */
.line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

.card-tags { margin-top: 0.75rem; display: flex; flex-wrap: wrap; gap: 0.5rem; }
.tag-chip { font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 999px; background: var(--chip-bg); color: var(--chip-text); border: 1px solid var(--border); }

.card-footer { margin-top: auto; padding-top: 1rem; display: flex; align-items: center; justify-content: flex-end; }
.icon-btn { display: inline-flex; align-items: center; justify-content: center; width: 2rem; height: 2rem; border-radius: 999px; border: 1px solid var(--border); background: #fff; color: #64748b; }
.icon-btn:hover { border-color: #fecaca; background: #fff5f5; color: var(--accent); }
.icon-btn.fav-active { background: #fef2f2; border-color: #fecaca; color: #dc2626; }
.cta { display: inline-flex; align-items: center; gap: 0.375rem; font-weight: 600; color: var(--accent); margin-left: auto; }
.cta svg { width: 16px; height: 16px; transition: transform 150ms ease; }
.card:hover .cta svg { transform: translateX(2px); }

/* Footer */
.footer { padding: 2rem 1rem; text-align: center; color: #64748b; font-size: 0.875rem; }

/* Background decoration & accessibility helpers */
.sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;}
body { position: relative; }
body::before { content: ""; position: fixed; inset: 0; z-index: -2; background:
  radial-gradient(800px 800px at 10% 10%, rgba(239,68,68,0.08), transparent 40%),
  radial-gradient(800px 800px at 85% 15%, rgba(244,63,94,0.08), transparent 40%),
  radial-gradient(700px 700px at 20% 85%, rgba(220,38,38,0.07), transparent 40%);
}
body::after { content: ""; position: fixed; inset: 0; z-index: -3; background-image:
  linear-gradient(to right, rgba(0,0,0,0.04) 1px, transparent 1px),
  linear-gradient(to bottom, rgba(0,0,0,0.04) 1px, transparent 1px);
background-size: 24px 24px; mix-blend-mode: normal; }

/* Skeleton (optional static demo) */
.skeleton { background: #fff; border: 1px solid var(--border); border-radius: 1rem; padding: 1rem; }
.skel { border-radius: 0.375rem; background: #e5e7eb; height: 1rem; animation: pulse 1.5s ease-in-out infinite; }
.skel.sm { height: 0.75rem; }
.skel.badge { width: 6rem; height: 1.125rem; }
.skel.wide { width: 75%; }
.skel.full { width: 100%; }
.skel.chips { height: 1.5rem; width: 4rem; border-radius: 999px; }
@keyframes pulse { 0%, 100% { opacity: .6; } 50% { opacity: 1; } }

/* Utilities */
.hidden{ display:none !important; }

/* Modal */
.modal{ position: fixed; inset: 0; display: grid; place-items: center; padding: 1rem; z-index: 50; }
.modal-backdrop{ position: absolute; inset: 0; background: rgba(15,23,42,.5); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); }
.modal-panel{ position: relative; width: 100%; max-width: 640px; background: #fff; border: 1px solid var(--border); border-radius: 1rem; box-shadow: 0 20px 60px rgba(0,0,0,.2); padding: 1.25rem; }
.modal-close{ position: absolute; top: .75rem; right: .75rem; width: 2rem; height: 2rem; display: inline-flex; align-items: center; justify-content: center; border-radius: 999px; border: 1px solid var(--border); background: #fff; color: #64748b; cursor: pointer; }
.modal-close:hover{ background: #fff5f5; color: var(--accent); border-color: #fecaca; }
.modal-panel h2{ margin: 0 0 .5rem; font-size: 1.125rem; font-weight: 600; }
.modal-list{ margin: .5rem 0 .75rem; padding-left: 1.25rem; color: var(--muted); }
.modal-note{ color: var(--muted); font-size: .875rem; }

/* Modal */
.modal { position: fixed; inset: 0; z-index: 50; display: flex; align-items: center; justify-content: center; }
.modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.45); }
.modal-panel { position: relative; z-index: 1; width: min(640px, calc(100% - 2rem)); background: #fff; border: 1px solid var(--border); border-radius: 1rem; padding: 1rem 1rem 1.25rem; box-shadow: 0 20px 40px rgba(0,0,0,0.16); outline: none; }
.modal-panel:focus { outline: 2px solid var(--ring); outline-offset: 2px; }
.modal-close { position: absolute; top: .5rem; right: .5rem; border: 1px solid var(--border); width: 2rem; height: 2rem; border-radius: 999px; background: #fff; color: #64748b; }
.modal-close:hover { border-color: #fecaca; background: #fff5f5; color: var(--accent); }
.modal-list { margin: .5rem 0 0; padding-left: 1rem; color: var(--muted); }
.modal-list li { margin: .25rem 0; }
.modal-note { margin-top: .5rem; color: var(--muted); }

/* Modal */
.modal{ position: fixed; inset: 0; display: grid; place-items: center; z-index: 50; }
.modal-backdrop{ position: absolute; inset: 0; background: rgba(15,23,42,.5); backdrop-filter: blur(2px); }
.modal-panel{ position: relative; z-index: 1; width: min(640px, 92%); max-height: 80vh; overflow: auto; background: #fff; border: 1px solid var(--border); border-radius: 1rem; box-shadow: 0 20px 60px rgba(0,0,0,.2); padding: 1.25rem 1.25rem 1rem; }
.modal-close{ position: absolute; top: .5rem; right: .75rem; border: 1px solid var(--border); background: #fff; width: 2rem; height: 2rem; border-radius: 999px; color: #64748b; }
.modal-close:hover{ border-color: #fecaca; background: #fff5f5; color: var(--accent); }
.modal-panel h2{ margin: 0 0 .5rem; font-size: 1.125rem; font-weight: 600; }
.modal-panel p{ color: var(--muted); margin: .25rem 0 .75rem; }
.modal-list{ padding-left: 1.2rem; color: var(--muted); }
.modal-note{ font-size: .875rem; color: #475569; margin-top: .75rem; }
